buildscript {
  repositories {
    mavenCentral()
  }
}

plugins {
  id "org.jetbrains.kotlin.jvm" version "1.3.21" apply false
  id "com.vanniktech.maven.publish" version "0.8.0" apply false
  id 'com.gradle.build-scan' version "2.1"
}

buildScan {
  termsOfServiceUrl = 'https://gradle.com/terms-of-service'
  termsOfServiceAgree = 'yes'
}

apply from: new File("./dependencies.gradle")

subprojects {
  apply plugin: "java"
  buildscript {
    repositories {
      mavenCentral()
      jcenter()
    }

    dependencies {
      classpath dep.kotlinGradlePlugin
      classpath dep.junitGradlePlugin
      classpath dep.shadowJarPlugin
      classpath dep.mavenPublishGradlePlugin
    }
  }

  repositories {
    mavenCentral()
    jcenter()
  }
  dependencies {
    testImplementation dep.junitApi
    testRuntimeOnly dep.junitEngine
  }
  test {
    useJUnitPlatform()
    testLogging {
      events "started", "passed", "skipped", "failed"
      exceptionFormat = 'full'
      showExceptions = true
    }
  }
  if (rootProject.file("hooks.gradle").exists()) {
    apply from: rootProject.file("hooks.gradle")
  }
}

